<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Self Learning HTML with Audio and Video Visualizers</title>
    <style>
      /* ... (previous styles remain the same) ... */
    </style>
  </head>
  <body>
    <!-- ... (previous HTML content remains the same) ... -->
    
    <h2>Video Players</h2>
    <button onclick="loadYouTubeVideo()">Load YouTube Video</button>
    <button onclick="showMP4Video()">Play MP4 Video</button>
    
    <div id="youtubeContainer" class="video-container">
      <div id="youtubeVideo"></div>
      <canvas id="youtubeVisualizer"></canvas>
    </div>
    
    <!-- ... (rest of the HTML remains the same) ... -->
    
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
      // ... (previous JavaScript code remains the same) ...

      let youtubePlayer;
      let youtubeAnimationId;
      let isYoutubePlaying = false;

      function onYouTubeIframeAPIReady() {
        youtubePlayer = new YT.Player('youtubeVideo', {
          height: '315',
          width: '560',
          videoId: 'TqGeM9T6gwI',
          events: {
            'onStateChange': onPlayerStateChange
          }
        });
      }

      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
          isYoutubePlaying = true;
          if (!youtubeAnimationId) {
            visualizeYouTube();
          }
        } else {
          isYoutubePlaying = false;
        }
      }

      function visualizeYouTube() {
        if (!isYoutubePlaying) {
          cancelAnimationFrame(youtubeAnimationId);
          youtubeAnimationId = null;
          return;
        }

        youtubeAnimationId = requestAnimationFrame(visualizeYouTube);

        youtubeCtx.clearRect(0, 0, youtubeCanvas.width, youtubeCanvas.height);

        const centerX = youtubeCanvas.width / 2;
        const centerY = youtubeCanvas.height / 2;
        const radius = Math.min(centerX, centerY) - 10;

        for (let i = 0; i < 360; i += 5) {
          const angle = i * Math.PI / 180;
          const length = Math.random() * radius / 2 + radius / 2;

          const startX = centerX + Math.cos(angle) * radius;
          const startY = centerY + Math.sin(angle) * radius;
          const endX = centerX + Math.cos(angle) * (radius - length);
          const endY = centerY + Math.sin(angle) * (radius - length);

          youtubeCtx.beginPath();
          youtubeCtx.moveTo(startX, startY);
          youtubeCtx.lineTo(endX, endY);
          youtubeCtx.strokeStyle = `hsl(${i}, 100%, 50%)`;
          youtubeCtx.lineWidth = 2;
          youtubeCtx.stroke();
        }
      }

      function loadYouTubeVideo() {
        const youtubeContainer = document.getElementById('youtubeContainer');
        const mp4Container = document.getElementById('mp4Container');

        youtubeContainer.style.display = 'block';
        mp4Container.style.display = 'none';

        // Stop MP4 visualization if it's running
        if (mp4Video.played) {
          mp4Video.pause();
        }

        if (youtubePlayer) {
          youtubePlayer.playVideo();
        }
      }

      // ... (rest of the JavaScript code remains the same) ...
    </script>
  </body>
</html>
